<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="Style.css">
    <title>Latens Core</title>
    <style>
        canvas {
            width: 640px;
            height: 720px;
            margin: 0 auto;
        }
    </style>
    <script>
        var x, y, screen = "start";

        function on_key_down() {
            var keycode = event.keyCode;
            if (keycode == 27){
                if(game.paused){
                    console.log("continue")
                    game.settingBool = false;
                    screen = "playing";
                    game.delayEsc = 0.1;
                    game.play();
                }
                if(screen == "page1"){
                        console.log("start")
                        screen = "start";
                        game.context.drawImage(image,-2,-2);
                        game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                else if(screen == "page2"){
                        console.log("start")
                        screen = "start";
                        game.context.drawImage(image,-2,-2);
                        game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                else if(screen == "page3"){
                        console.log("start")
                        screen = "start";
                        game.context.drawImage(image,-2,-2);
                        game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                else if(screen == "page4"){
                        console.log("start")
                        screen = "start";
                        game.context.drawImage(image,-2,-2);
                        game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                else if(screen == "page5"){
                        console.log("start")
                        screen = "start";
                        game.context.drawImage(image,-2,-2);
                        game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
            }
            if(keycode == 32){
                if(screen == "Gameover"){
                    console.log("reStart")
                    screen = "start";
                    location.reload(true);
                    location.href = location.href;
                    history.go(-1);
                }   
            }
        }
        var x, y, screen = "start";
        function mouse_coords(event){
            x = event.clientX;
            y = event.clientY;
            console.log(x,y);
            
            if(screen == "start"){
                if(x >= 389 && x <= 823 && y >= 395 && y <= 531){
                    console.log("play")
                    screen = "playing";
                    game.play();
                }
                if(x >= 453 && x <= 765 && y >= 567 && y <= 660){
                    console.log("instruction")
                    screen = "page1";
                    game.context.drawImage(one,-2,-2);
                    game.context2.drawImage(one,642,0,640,720,0,-2,640,720);
                }
            }
            else if(screen == "page1"){
                if(x >= 1157 && x <= 1206 && y >= 8 && y <= 55){
                    console.log("start")
                    screen = "start";
                    game.context.drawImage(image,-2,-2);
                    game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                if(x >= 1084 && x <= 1202 && y >= 275 && y <= 472){
                    console.log("page2")
                    screen = "page2";
                    game.context.drawImage(two,-2,-2);
                    game.context2.drawImage(two,642,0,640,720,0,-2,640,720);
                }
            }
            else if(screen == "page2"){
                if(x >= 1157 && x <= 1206 && y >= 8 && y <= 55){
                    console.log("start")
                    screen = "start";
                    game.context.drawImage(image,-2,-2);
                    game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                if(x >= 10 && x <= 111 && y >= 264 && y <= 478){
                    console.log("page1")
                    screen = "page1";
                    game.context.drawImage(one,-2,-2);
                    game.context2.drawImage(one,642,0,640,720,0,-2,640,720);
                }
                if(x >= 1084 && x <= 1202 && y >= 275 && y <= 472){
                    console.log("page3")
                    screen = "page3";
                    game.context.drawImage(three,-2,-2);
                    game.context2.drawImage(three,642,0,640,720,0,-2,640,720);
                }
            }
            else if(screen == "page3"){
                if(x >= 1157 && x <= 1206 && y >= 8 && y <= 55){
                    console.log("start")
                    screen = "start";
                    game.context.drawImage(image,-2,-2);
                    game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                if(x >= 10 && x <= 111 && y >= 264 && y <= 478){
                    console.log("page2")
                    screen = "page2";
                    game.context.drawImage(two,-2,-2);
                    game.context2.drawImage(two,642,0,640,720,0,-2,640,720);
                }
                if(x >= 1084 && x <= 1202 && y >= 275 && y <= 472){
                    console.log("page4")
                    screen = "page4";
                    game.context.drawImage(four,-2,-2);
                    game.context2.drawImage(four,642,0,640,720,0,-2,640,720);
                }
            }
            else if(screen == "page4"){
                if(x >= 1157 && x <= 1206 && y >= 8 && y <= 55){
                    console.log("start")
                    screen = "start";
                    game.context.drawImage(image,-2,-2);
                    game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                if(x >= 10 && x <= 111 && y >= 264 && y <= 478){
                    console.log("page3")
                    screen = "page3";
                    game.context.drawImage(three,-2,-2);
                    game.context2.drawImage(three,642,0,640,720,0,-2,640,720);
                }
                if(x >= 1084 && x <= 1202 && y >= 275 && y <= 472){
                    console.log("page5")
                    screen = "page5";
                    game.context.drawImage(five,-2,-2);
                    game.context2.drawImage(five,642,0,640,720,0,-2,640,720);
                }
            }
            else if(screen == "page5"){
                if(x >= 1157 && x <= 1206 && y >= 8 && y <= 55){
                    console.log("start")
                    screen = "start";
                    game.context.drawImage(image,-2,-2);
                    game.context2.drawImage(image,642,0,640,720,0,-2,640,720);
                }
                if(x >= 10 && x <= 111 && y >= 264 && y <= 478){
                    console.log("page4")
                    screen = "page4";
                    game.context.drawImage(four,-2,-2);
                    game.context2.drawImage(four,642,0,640,720,0,-2,640,720);
                }
            }
            
            else if(screen == "Gameover"){
                    console.log("reStart")
                    screen = "start";
                    location.reload(true);
                    location.href = location.href;
                    history.go(-1);
            }
            else if(screen == "setting"){
                if(x >= 413 && x <= 893 && y >= 479 && y <= 543){
                    console.log("continue")
                    game.settingBool = false;
                    screen = "playing";
                    game.play();
                }
                else if(x >= 415 && x <= 895 && y >= 576 && y <= 633){
                    console.log("stop")
                    screen = "start";
                    location.reload(true);
                    location.href = location.href;
                    history.go(-1);
                }
                else if(x >= 458 && x <= 551 && y >= 219 && y <= 284){
                    console.log("bgm up");
                    if(game.setting_bgm_volume <= 0.9){
                        game.setting_bgm_volume += 0.1;
                    }
                }
                else if(x >= 941 && x <= 1043 && y >= 217 && y <= 291){
                    console.log("bgm down");
                    if(game.setting_bgm_volume >= 0.1){
                        game.setting_bgm_volume -= 0.1;
                    }
                    else if(game.setting_bgm_volume < 0.1){
                        game.setting_bgm_volume = 0;
                    }
                }
                else if(x >= 463 && x <= 530 && y >= 327 && y <= 398){
                    console.log("effect up");
                    if(game.setting_effect_volume <= 0.9){
                        game.setting_effect_volume += 0.1;
                    }
                }
                else if(x >= 947 && x <= 1031 && y >= 344 && y <= 405){
                    console.log("effect down");
                    if(game.setting_effect_volume >= 0.1){
                        game.setting_effect_volume -= 0.1;
                    }
                    else if(game.setting_effect_volume < 0.1){
                        game.setting_effect_volume = 0;
                    }
                }

            game.context.drawImage(bar,0,96,250,80,513,218.5,215,60);
            game.context.drawImage(bar,0,96,250,80,513,323.5,215,60);
            game.context2.drawImage(bar,150,96,380,80,0,219,321,59);
            game.context2.drawImage(bar,150,96,380,80,0,323.5,321,59); //비우기
            
            game.context.drawImage(bar,(1 - game.setting_bgm_volume) * 500,0.1,250,80,513 + 430 * (1 - game.setting_bgm_volume),219,215,60);
            game.context.drawImage(bar,(1 - game.setting_effect_volume) * 500,0,250,80,513 + 428 * (1 - game.setting_effect_volume),323.5,215,60);
            if(game.setting_bgm_volume > 0.7){
                game.context2.drawImage(bar,150,0,380,80,0,218.5,322,60);
            }
            else{
                game.context2.drawImage(bar,150 + (0.7 - game.setting_bgm_volume) * 500,0,380,80,423 * (0.7 - game.setting_bgm_volume),218.5,322,60);
            }
            if(game.setting_effect_volume > 0.7){
                game.context2.drawImage(bar,150,0,380,80,0,323.5,322,60);
            }
            else{
                game.context2.drawImage(bar,150 + (0.7   - game.setting_effect_volume) * 500,0,380,80,424 * (0.7 - game.setting_effect_volume),323.5,322,60);
            }
            console.log(game.setting_bgm_volume);
            console.log(game.setting_effect_volume);
            }
        }
        var canvas;
        var context;
        var canvas2;
        var context2;
        var one;
        var two;
        var three;
        var four;
        var five;
        var image;

        window.onload = function () {
            
            var canvas = document.getElementById("game");
            var context = canvas.getContext("2d");
            var canvas2 = document.getElementById("game2");
            var context2 = canvas2.getContext("2d");

            image = new Image();
            image.src = "StartImage.png";
            one = new Image();
            one.src = "Resources/Page1.png";
            two = new Image();
            two.src = "Resources/Page2.png";
            three = new Image();
            three.src = "Resources/Page3.png";
            four = new Image();
            four.src = "Resources/Page4.png";
            five = new Image();
            five.src = "Resources/Page5.png";
            
            image.onload = function(){
                context.drawImage(image,-2,-2);
                context2.drawImage(image,642,0,640,720,0,-2,640,720);
            };
        };
    </script>
</head>
<body onkeydown='on_key_down()'>
    <div onclick="mouse_coords(event)" style="background-color:rgb(0, 255, 234)";>
        <canvas id="game" width="640px" height="720px" style="position:absolute;left:10px"></canvas>
        <canvas id="game2" width="640px" height="720px" style="position:absolute;left:650px"></canvas>
    </div>
    <script src="Js2.js">
    </script>
    <script src="assets/js/jquery.min.js"></script>
    <script>
    jQuery(document).keydown(function(e) {
            if(e.keyCode === 37 || e.keyCode === 38 || e.keyCode === 39 || e.keyCode === 40) {
               return false;
            }
         });
         </script>
</body>
</html>